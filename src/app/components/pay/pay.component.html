<ion-header no-border>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="closeModal('pago_no_efectuado')">
        <ion-icon slot="icon-only" name="close" style="color:#444;font-size:27px"></ion-icon>
      </ion-button>
    </ion-buttons>
    <!-- <ion-title>Nuevo envío</ion-title> -->
    <ion-buttons slot="end">
      <ion-button (click)="closeModal('pago_no_efectuado')" color="dark">
        Cancelar
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <div style="padding:15px">
    <div
      style="padding:10px;background:slategray;width:100%;border-radius:5px;display:flex;align-items:center;justify-content:space-between">
      <div>
        <div style="font-size:17px;font-weight:600;color:white">
          55% de descuento
        </div>
        <div style="color:#eee;font-size:14px">
          <div>
            Valido por 1 pedido
          </div>
        </div>
      </div>
      <ion-icon name="checkmark" style="color:white;font-size:22px"></ion-icon>
    </div>
  </div>


  <ion-item lines="none">
    <div style="color:#444;font-size:17px">
      Método de pago:
    </div>
  </ion-item>

  <ion-item (click)="togglePay('Tarjeta')" lines="none">
    <ion-icon slot="start" name="card" style="color:#666"></ion-icon>
    <ion-label>Tarjeta</ion-label>
    <ion-icon *ngIf="metodo_pago == 'Tarjeta'" slot="end" name="checkmark-circle" style="color:limegreen"></ion-icon>
    <ion-icon *ngIf="metodo_pago != 'Tarjeta'" slot="end" name="checkmark-circle" style="color:white"></ion-icon>
  </ion-item>

  <ion-item (click)="togglePay('Efectivo')" lines="none">
    <ion-icon slot="start" name="cash" style="color:#666"></ion-icon>
    <ion-label>Efectivo</ion-label>
    <ion-icon *ngIf="metodo_pago == 'Efectivo'" slot="end" name="checkmark-circle" style="color:limegreen"></ion-icon>
    <ion-icon *ngIf="metodo_pago != 'Efectivo'" slot="end" name="checkmark-circle" style="color:white"></ion-icon>
  </ion-item>


  <ion-item lines="none">
    <div style="color:#444;font-size:17px">
      ¿Quién envía?
    </div>
  </ion-item>

  <ion-item lines="none">
    <ion-icon slot="start" name="phone-portrait" style="color:#bbb"></ion-icon>
    <ion-input type="tel" placeholder="Teléfono" [(ngModel)]="telefono_origen" style="border-bottom:1px solid #eee">
    </ion-input>
  </ion-item>

  <ion-item lines="none">
    <div style="color:#444;font-size:17px">
      ¿Quién recibe?
    </div>
  </ion-item>

  <ion-item lines="none">
    <ion-icon slot="start" name="phone-portrait" style="color:#bbb"></ion-icon>
    <ion-input type="tel" placeholder="Teléfono" [(ngModel)]="telefono_destino" style="border-bottom:1px solid #eee">
    </ion-input>
  </ion-item>

  <div padding>
    <ion-textarea placeholder="Agregar nota (opcional)" [(ngModel)]="instrucciones" rows="5"
      style="border:1px solid #eee;border-radius:5px">
    </ion-textarea>
  </div>

</ion-content>

<ion-footer style="background:white">

  <div style="display:flex;align-items:center;justify-content:space-between">
    <div style="color:#777;width:30%;text-align:center">
      Entrega:
      <div style="display:flex;align-items:center;width:100%;justify-content:center">
        <ion-icon name="time" style="color:#bbb;margin-right:5px;font-size:18px;"></ion-icon>
        <!-- 17:10 -->
        {{tiempo_entrega}}
      </div>
    </div>
    <div style="color:#777;width:30%;text-align:center">
      Total:
      <span *ngIf="!cuponData.ok" style="color:limegreen;font-weight:600">${{monto}}</span>
      <span *ngIf="cuponData.ok && precio_descuento != 0"
        style="color:limegreen;font-weight:600">${{precio_descuento}}</span>
      <span *ngIf="cuponData.ok && precio_descuento == 0" style="color:limegreen;font-weight:600">Gratis</span>
    </div>
    <div (click)="confirmar_envio()"
      style="width:40%;padding:15px;text-align:center;font-weight:600;background:limegreen;color:white;">
      Confirmar
    </div>
  </div>
</ion-footer>

<div *ngIf="isLoading"
  style="z-index:999;position:fixed;top:0px;left:0px;height:100%;width:100%;display:flex;align-items:center;justify-content:center;background:rgb(34, 34, 34, 0.5)">
  <div
    style="box-shadow: 0 0 20px rgba(68, 68, 68, 0.75);padding:30px;padding-top:20px;padding-bottom:20px;width:80%;border-radius:3px;background:white;">
    <div style="width:100%;display:flex;align-items:center">
      <ion-spinner color="secondary"></ion-spinner>
      <div style="margin-left:20px;font-size:17px;margin-right:10px">
        Cargando...
      </div>
    </div>
  </div>
</div>